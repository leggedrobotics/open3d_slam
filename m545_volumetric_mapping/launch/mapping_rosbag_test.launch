<?xml version="1.0" encoding="UTF-8"?>

<launch>

	<arg name="launch_rviz" default="true" />
	<arg name="cloud_topic" default="/ouster_points_self_filtered" />
	<arg name="play_delay" default="0.4" />
	<arg name="play_rate" default="0.5" />
	<arg name="use_sim_time" default="true" />

	<arg name="parameter_file_path" default="$(find m545_volumetric_mapping)/param/params_ouster_os0_128.yaml"/>
	<arg name="bag_filename_1" default="4_heap_pc2__2021-10-22-16-04-25" />
	<arg name="bag_filename_2" default="4_heap_camera_2021-10-22-16-04-25" />
	<arg name="bag_filepath" 
		default="$(find m545_volumetric_mapping)/data/" />

	<include file="$(find m545_volumetric_mapping)/launch/mapping.launch">
		<arg name="cloud_topic" value="$(arg cloud_topic)"/>
		<arg name="launch_rviz" value="$(arg launch_rviz)"/>
		<arg name="parameter_file_path" value="$(arg parameter_file_path)"/>
		
	</include>

	<node pkg="rosbag" type="play" name="rosbag"
		args="$(arg bag_filepath)$(arg bag_filename_1).bag $(arg bag_filepath)$(arg bag_filename_2).bag --delay '$(arg play_delay)' --rate '$(arg play_rate)' --clock -s 60" />
	<!-- append - -loop for looping -->

</launch>
